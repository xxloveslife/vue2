{"remainingRequest":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ForVue\\VueXmall\\xmall\\src\\views\\Goods\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ForVue\\VueXmall\\xmall\\src\\views\\Goods\\index.vue","mtime":1589096417320},{"path":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNYWxsR29vZHMgZnJvbSAnQC9jb21wb25lbnRzL01hbGxHb29kcycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYXZMaXN0OiBbewogICAgICAgICAgdGl0bGU6ICfnu7zlkIjmjpLluo8nCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S7t+agvOeUseS9juWIsOmrmCcKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5Lu35qC855Sx6auY5Yiw5L2OJwogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGlzSW5kZXg6IDAsCiAgICAgIG1pbjogJycsCiAgICAgIG1heDogJycsCiAgICAgIGFsbEdvb2RzOiBbXSwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiAyMCwKICAgICAgc29ydDogIiIsCiAgICAgIHRvdGFsOiAwLAogICAgfQogIH0sDQogIHdhdGNoOiB7DQogICAgJHJvdXRlOidnZXRBbGxHb29kcycNCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VTaXplPXZhbDsKICAgICAgdGhpcy5nZXRBbGxHb29kcygpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2U9dmFsOw0KICAgICAgdGhpcy5nZXRBbGxHb29kcygpOwogICAgfSwNCiAgICBwcmljZVNvcnQodil7DQogICAgICB0aGlzLnNvcnQ9djsNCiAgICAgIHRoaXMuZ2V0QWxsR29vZHMoKTsNCiAgICB9LA0KICAgIHJlc2V0KCl7DQogICAgICB0aGlzLnNvcnQ9Jyc7DQogICAgICB0aGlzLmN1cnJlbnRQYWdlPTE7DQogICAgICB0aGlzLmdldEFsbEdvb2RzKCk7DQogICAgfSwKICAgIGhhbmRsZVNvcnQoaSkgewogICAgICB0aGlzLmlzSW5kZXggPSBpOwogICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB0aGlzLnByaWNlU29ydCgxKQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5wcmljZVNvcnQoLTEpCiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgoKICAgICAgfQoKICAgIH0sCiAgICBhc3luYyBnZXRBbGxHb29kcygpIHsNCiAgICAgIGNvbnN0IHVybCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmNpZCA/IGAvYXBpL2dvb2RzL2FsbEdvb2RzP3BhZ2U9JHt0aGlzLmN1cnJlbnRQYWdlfSZzaXplPSR7DQogICAgICAgICAgdGhpcy5wYWdlU2l6ZQ0KICAgICAgICB9JnNvcnQ9JHt0aGlzLnNvcnR9JnByaWNlR3Q9JHt0aGlzLm1pbn0mcHJpY2VMdGU9JHt0aGlzLm1heH0mY2lkPSR7dGhpcy4kcm91dGUucXVlcnkuY2lkfWAgOiBgL2FwaS9nb29kcy9hbGxHb29kcz9wYWdlPSR7dGhpcy5jdXJyZW50UGFnZX0mc2l6ZT0kew0KICAgICAgICAgIHRoaXMucGFnZVNpemUNCiAgICAgICAgfSZzb3J0PSR7dGhpcy5zb3J0fSZwcmljZUd0PSR7dGhpcy5taW59JnByaWNlTHRlPSR7dGhpcy5tYXh9YAogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KHVybCkKCiAgICAgICAgdGhpcy5hbGxHb29kcyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWwKICAgICAgICBjb25zb2xlLmxvZygncmVzLmRhdGEnLCByZXMuZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vZG8gc29tZXRoaW5nIGFmdGVyIGNyZWF0aW5nIHZ1ZSBpbnN0YW5jZQogICAgdGhpcy5nZXRBbGxHb29kcygpOwogIH0sCiAgY29tcG9uZW50czogewogICAgTWFsbEdvb2RzLAogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Goods","sourcesContent":["<template>\n<div class=\"goods\">\r\n  <div class=\"nav\">\r\n    <div class=\"w\">\r\n      <a @click=\"handleSort(i)\" :class=\"{active:i===isIndex}\" href=\"javascript:;\" v-for=\"(navItem,i) in navList\" :key=\"i\">\r\n        {{navItem.title}}\r\n      </a>\r\n      <div class=\"price-interval\">\r\n        <input type=\"number\" class=\"input\" placeholder=\"价格\" v-model=\"min\">\r\n        <span style=\"margin: 0 5px\">-</span>\r\n        <input type=\"number\" placeholder=\"价格\" v-model=\"max\">\r\n        <el-button type=\"primary\" size=\"small\" style=\"margin-left: 10px;\" @click=\"reset\">确定</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div>\r\n    <div class=\"goods-box w\">\r\n      <MallGoods v-for=\"goods in allGoods\" :key=\"goods.id\" :goods=\"goods\"></MallGoods>\r\n    </div>\r\n    <div class=\"w\">\r\n      <el-pagination style=\"float:right;\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"currentPage\" :page-sizes=\"[8, 20, 40, 80]\" :page-size=\"pageSize\" layout=\"total,sizes, prev, pager, next\"\r\n        :total=\"total\"></el-pagination>\r\n    </div>\r\n  </div>\r\n</div>\n</template>\r\n<script>\nimport MallGoods from '@/components/MallGoods'\nexport default {\n  name: \"\",\n  data() {\n    return {\n      navList: [{\n          title: '综合排序'\n        },\n        {\n          title: '价格由低到高'\n        },\n        {\n          title: '价格由高到低'\n        },\n      ],\n      isIndex: 0,\n      min: '',\n      max: '',\n      allGoods: [],\n      currentPage: 1,\n      pageSize: 20,\n      sort: \"\",\n      total: 0,\n    }\n  },\r\n  watch: {\r\n    $route:'getAllGoods'\r\n  },\n  methods: {\n    handleSizeChange(val) {\n      this.pageSize=val;\n      this.getAllGoods();\n    },\n    handleCurrentChange(val) {\n      this.currentPage=val;\r\n      this.getAllGoods();\n    },\r\n    priceSort(v){\r\n      this.sort=v;\r\n      this.getAllGoods();\r\n    },\r\n    reset(){\r\n      this.sort='';\r\n      this.currentPage=1;\r\n      this.getAllGoods();\r\n    },\n    handleSort(i) {\n      this.isIndex = i;\n      switch (i) {\n        case 0:\n          this.reset();\n          break;\n        case 1:\n          this.priceSort(1)\n          break;\n        case 2:\n          this.priceSort(-1)\n          break;\n        default:\n\n      }\n\n    },\n    async getAllGoods() {\r\n      const url = this.$route.query.cid ? `/api/goods/allGoods?page=${this.currentPage}&size=${\r\n          this.pageSize\r\n        }&sort=${this.sort}&priceGt=${this.min}&priceLte=${this.max}&cid=${this.$route.query.cid}` : `/api/goods/allGoods?page=${this.currentPage}&size=${\r\n          this.pageSize\r\n        }&sort=${this.sort}&priceGt=${this.min}&priceLte=${this.max}`\n      try {\n        const res = await this.$http.get(url)\n\n        this.allGoods = res.data.data\n        this.total = res.data.total\n        console.log('res.data', res.data);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  },\n  created() {\n    //do something after creating vue instance\n    this.getAllGoods();\n  },\n  components: {\n    MallGoods,\n  }\n}\n</script>\r\n<style lang=\"scss\" scoped>\n@import \"../../assets/style/mixin\";\n@import \"../../assets/style/theme\";\n\n.nav {\n    height: 60px;\n    line-height: 60px;\n    > div {\n        display: flex;\n        align-items: center;\n        a {\n            padding: 0 30px 0 0;\n            height: 100%;\n            @extend %block-center;\n            font-size: 12px;\n            color: #999;\n            &.active {\n                color: #5683ea;\n            }\n            &:hover {\n                color: #5683ea;\n            }\n        }\n        input {\n            @include wh(80px, 30px);\n            border: 1px solid #ccc;\n        }\n        input + input {\n            margin-left: 10px;\n        }\n    }\n    .price-interval {\n        padding: 0 15px;\n        @extend %block-center;\n        input[type=\"number\"] {\n            border: 1px solid #ccc;\n            text-align: center;\n            background: none;\n            border-radius: 5px;\n        }\n    }\n}\n\n.goods-box {\n    overflow: hidden;\n    > div {\n        float: left;\n        border: 1px solid #efefef;\n    }\n}\n\n.no-info {\n    padding: 100px 0;\n    text-align: center;\n    font-size: 30px;\n    display: flex;\n    flex-direction: column;\n    .no-data {\n        align-self: center;\n    }\n}\n\n.img-item {\n    display: flex;\n    flex-direction: column;\n}\n\n.el-pagination {\n    align-self: flex-end;\n    margin: 3vw 10vw 2vw;\n}\n\n.section {\n    padding-top: 8vw;\n    margin-bottom: -5vw;\n    width: 1218px;\n    align-self: center;\n}\n\n.recommend {\n    display: flex;\n    > div {\n        flex: 1;\n        width: 25%;\n    }\n}\n</style>\r\n"]}]}