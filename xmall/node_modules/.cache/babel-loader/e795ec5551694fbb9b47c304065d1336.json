{"remainingRequest":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\babel-loader\\lib\\index.js!D:\\ForVue\\VueXmall\\xmall\\src\\main.js","dependencies":[{"path":"D:\\ForVue\\VueXmall\\xmall\\src\\main.js","mtime":1589553081132},{"path":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\ForVue\\VueXmall\\xmall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgIkQ6XFxGb3JWdWVcXFZ1ZVhtYWxsXFx4bWFsbFxcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiRDpcXEZvclZ1ZVxcVnVlWG1hbGxcXHhtYWxsXFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLnByb21pc2UuanMiOwppbXBvcnQgIkQ6XFxGb3JWdWVcXFZ1ZVhtYWxsXFx4bWFsbFxcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJEOlxcRm9yVnVlXFxWdWVYbWFsbFxceG1hbGxcXG5vZGVfbW9kdWxlc1xcY29yZS1qc1xcbW9kdWxlc1xcZXMucHJvbWlzZS5maW5hbGx5LmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgQXBwIGZyb20gJy4vQXBwLnZ1ZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7CmltcG9ydCAnLi9wbHVnaW5zL2VsZW1lbnQuanMnOwppbXBvcnQgeyBnZXRTdG9yZSB9IGZyb20gJ0AvdXRpbHMvc3RvcmFnZSc7ClZ1ZS5jb25maWcucHJvZHVjdGlvblRpcCA9IGZhbHNlOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpWdWUucHJvdG90eXBlLiRodHRwID0gYXhpb3M7CmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8g5YWI5p+l55yLdG9rZW7mmK/lkKblrZjlnKgs5Lmf5bCx5piv5q2k5qyh55qEcm91dGVy5o+Q5Lqk5piv5ZCm5piv5pC65bimdG9rZW4g55qE5o+Q5LqkCiAgdmFyIHRva2VuID0gZ2V0U3RvcmUoJ3Rva2VuJyk7IC8vIC8vIHRlc3TmtYvor5UKICAvLyBsZXQgYSA9IHsKICAvLyAgIHJlc3VsdDpbMSwyLDMsNCw1XQogIC8vIH0KICAvLyBsZXQge251bUxpc3R9ID0gYS5yZXN1bHQuZmluZChpdGVtID0+CiAgLy8gICBpdGVtJTI9PTAKICAvLyApCiAgLy8gbnVtTGlzdCsrCiAgLy8gY29uc29sZS5sb2coJ2EnLGEpOwogIC8vIGNvbnNvbGUubG9nKHRva2VuKTsKCiAgaWYgKHRva2VuKSB7CiAgICAvLyDooajnpLrlt7Lnu4/nmbvlvZUs5bey57uP55m75b2V55qE5o+Q5LqkLOmcgOimgeaQuuW4pnRva2VuICxBdXRob3JpemF0aW9u5piv5ZCO56uv5Lyg5p2l55qEdG9rZW7nmoRrZXnlgLws5Zyo5aS05paH5Lu26YeM6K6+572u5re75YqgCiAgICBjb25maWcuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gY29uc3QgcCA9IFByb21pc2UucmVqZWN0KCflh7rplJnkuoYnKTsKICAvLyAvLyDnrYnlkIzkuo4KICAvLyBjb25zdCBwID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gcmVqZWN0KCflh7rplJnkuoYnKSkKICAvLyBwLnRoZW4obnVsbCwgZnVuY3Rpb24ocykgewogIC8vICAgY29uc29sZS5sb2cocykKICAvLyB9KTsKICAvLyDlh7rplJnkuoYKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgYXhpb3MucG9zdCgnL2FwaS92YWxpZGF0ZScsIHt9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIC8vIOavj+asoei3s+i9rOmDvemqjOivgeS4i+aYr+WQpuaYr+eZu+W9leeKtuaAgSzlpoLmnpzkuI3mmK/nmbvlvZXnirbmgIEs5Zyo5p+l55yLdG/nmoTot6/lvoTmmK/lkKbpnIDopoHnmbvlvZUsCiAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwoKICAgIGlmIChkYXRhLnN0YXRlICE9PSAxKSB7CiAgICAgIC8vIOeUqOaIt+imgeeZu+W9lQogICAgICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICByZXR1cm4gcmVjb3JkLm1ldGEuYXV0aDsKICAgICAgfSkpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0by5mdWxsUGF0aCk7CiAgICAgICAgLy8g6ZyA6KaB5p2D6ZmQCiAgICAgICAgbmV4dCh7CiAgICAgICAgICBwYXRoOiAnL2xvZ2luJywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIHJlZGlyZWN0OiB0by5mdWxsUGF0aAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8g5bey57uP55m75b2VLOS/neWtmOeUqOaIt+eahOS/oeaBrwogICAgICBzdG9yZS5jb21taXQoJ0lTTE9HSU5HJywgZGF0YSk7CiAgICB9CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgfSk7CiAgbmV4dCgpOwp9KTsKbmV3IFZ1ZSh7CiAgcm91dGVyOiByb3V0ZXIsCiAgc3RvcmU6IHN0b3JlLAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgpIHsKICAgIHJldHVybiBoKEFwcCk7CiAgfQp9KS4kbW91bnQoJyNhcHAnKTs="},{"version":3,"sources":["D:/ForVue/VueXmall/xmall/src/main.js"],"names":["Vue","App","router","store","getStore","config","productionTip","axios","prototype","$http","interceptors","request","use","token","headers","common","error","Promise","reject","beforeEach","to","from","next","post","then","res","data","state","matched","some","record","meta","auth","path","query","redirect","fullPath","commit","catch","console","log","render","h","$mount"],"mappings":";;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAO,sBAAP;AACA,SAASC,QAAT,QAAyB,iBAAzB;AAGAJ,GAAG,CAACK,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACAP,GAAG,CAACQ,SAAJ,CAAcC,KAAd,GAAsBF,KAAtB;AACAA,KAAK,CAACG,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAP,MAAM,EAAI;AACvC;AACA,MAAMQ,KAAK,GAAGT,QAAQ,CAAC,OAAD,CAAtB,CAFuC,CAGvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAIS,KAAJ,EAAW;AACT;AACAR,IAAAA,MAAM,CAACS,OAAP,CAAeC,MAAf,CAAsB,eAAtB,IAAyCF,KAAzC;AAED;;AAED,SAAOR,MAAP;AAED,CArBD,EAqBG,UAAAW,KAAK,EAAI;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CA/BD;AAgCAd,MAAM,CAACiB,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpCf,EAAAA,KAAK,CAACgB,IAAN,CAAW,eAAX,EAA2B,EAA3B,EAA+BC,IAA/B,CAAoC,UAAAC,GAAG,EAAI;AACzC;AACA,QAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;;AACA,QAAGA,IAAI,CAACC,KAAL,KAAgB,CAAnB,EAAsB;AACpB;AACA,UAAIP,EAAE,CAACQ,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,eAAIA,MAAM,CAACC,IAAP,CAAYC,IAAhB;AAAA,OAAtB,CAAJ,EAAiD;AAC/C;AACA;AACAV,QAAAA,IAAI,CAAC;AACHW,UAAAA,IAAI,EAAE,QADH;AAEHC,UAAAA,KAAK,EAAE;AACLC,YAAAA,QAAQ,EAAEf,EAAE,CAACgB;AADR;AAFJ,SAAD,CAAJ;AAMD,OATD,MASO;AACLd,QAAAA,IAAI;AACL;AACF,KAdD,MAcM;AACJ;AACAnB,MAAAA,KAAK,CAACkC,MAAN,CAAa,UAAb,EAAwBX,IAAxB;AAED;AACF,GAtBD,EAsBGY,KAtBH,CAsBS,UAAAtB,KAAK,EAAG;AACfuB,IAAAA,OAAO,CAACC,GAAR,CAAYxB,KAAZ;AACD,GAxBD;AAyBAM,EAAAA,IAAI;AACL,CA3BD;AA6BA,IAAItB,GAAJ,CAAQ;AACNE,EAAAA,MAAM,EAANA,MADM;AAENC,EAAAA,KAAK,EAALA,KAFM;AAGNsC,EAAAA,MAAM,EAAE,gBAAAC,CAAC;AAAA,WAAIA,CAAC,CAACzC,GAAD,CAAL;AAAA;AAHH,CAAR,EAIG0C,MAJH,CAIU,MAJV","sourcesContent":["import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport './plugins/element.js'\r\nimport { getStore } from '@/utils/storage'\r\n\r\n\r\nVue.config.productionTip = false\r\nimport axios from 'axios'\r\nVue.prototype.$http = axios;\r\naxios.interceptors.request.use(config => {\r\n  // 先查看token是否存在,也就是此次的router提交是否是携带token 的提交\r\n  const token = getStore('token');\r\n  // // test测试\r\n  // let a = {\r\n  //   result:[1,2,3,4,5]\r\n  // }\r\n  // let {numList} = a.result.find(item =>\r\n  //   item%2==0\r\n  // )\r\n  // numList++\r\n  // console.log('a',a);\r\n  // console.log(token);\r\n  if (token) {\r\n    // 表示已经登录,已经登录的提交,需要携带token ,Authorization是后端传来的token的key值,在头文件里设置添加\r\n    config.headers.common['Authorization'] = token\r\n\r\n  }\r\n\r\n  return config\r\n\r\n}, error => {\r\n  // const p = Promise.reject('出错了');\r\n  // // 等同于\r\n  // const p = new Promise((resolve, reject) => reject('出错了'))\r\n  // p.then(null, function(s) {\r\n  //   console.log(s)\r\n  // });\r\n  // 出错了\r\n\r\n  return Promise.reject(error)\r\n})\r\nrouter.beforeEach((to, from, next) => {\r\n  axios.post('/api/validate',{}).then(res => {\r\n    // 每次跳转都验证下是否是登录状态,如果不是登录状态,在查看to的路径是否需要登录,\r\n    let data = res.data;\r\n    if(data.state  !== 1) {\r\n      // 用户要登录\r\n      if (to.matched.some(record => record.meta.auth)) {\r\n        // console.log(to.fullPath);\r\n        // 需要权限\r\n        next({\r\n          path: '/login',\r\n          query: {\r\n            redirect: to.fullPath,\r\n          }\r\n        })\r\n      } else {\r\n        next();\r\n      }\r\n    }else {\r\n      // 已经登录,保存用户的信息\r\n      store.commit('ISLOGING',data)\r\n\r\n    }\r\n  }).catch(error =>{\r\n    console.log(error);\r\n  })\r\n  next()\r\n})\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n"]}]}